

on:
  push:
    paths-ignore:
      - 'misc/**'
  pull_request:
    paths-ignore:
      - 'misc/**'

name: Check is Documented

jobs:
  testthat:
    runs-on: ubuntu-latest
    container:
      image: ghcr.io/${{ github.repository_owner }}/rbmi:r404
    steps:
      
      - name: Checkout
        uses: actions/checkout@v2
      
      
      - name: Document Code
        run: |
          options(crayon.enabled = TRUE, cli.dynamic = FALSE)
          devtools::document()
        shell: Rscript {0}
      
      - name: Check Is Clean
        run:
          if [ -z "$(git status --porcelain)" ]; then 
            echo "Is Clean"
          else
            echo "Changed Detected"
            exit 2
          fi
